// <auto-generated />
using System;
using System.Runtime.InteropServices;

namespace Metal.NET;

internal static class MTLTensor_Selectors
{
    internal static readonly Selector buffer = Selector.Register("buffer");
    internal static readonly Selector bufferOffset = Selector.Register("bufferOffset");
    internal static readonly Selector dataType = Selector.Register("dataType");
    internal static readonly Selector dimensions = Selector.Register("dimensions");
    internal static readonly Selector gpuResourceID = Selector.Register("gpuResourceID");
    internal static readonly Selector strides = Selector.Register("strides");
    internal static readonly Selector usage = Selector.Register("usage");
    internal static readonly Selector getBytes = Selector.Register("getBytes");
    internal static readonly Selector replaceSliceOrigin = Selector.Register("replaceSliceOrigin");
}

[StructLayout(LayoutKind.Sequential)]
public readonly struct MTLTensor
{
    public readonly nint NativePtr;

    public MTLTensor(nint ptr) => NativePtr = ptr;

    public bool IsNull => NativePtr == 0;

    public static implicit operator nint(MTLTensor o) => o.NativePtr;
    public static implicit operator MTLTensor(nint ptr) => new MTLTensor(ptr);

    public MTLBuffer Buffer
    {
        get => new MTLBuffer(ObjectiveCRuntime.intptr_objc_msgSend(NativePtr, MTLTensor_Selectors.buffer));
    }

    public nuint BufferOffset
    {
        get => ObjectiveCRuntime.nuint_objc_msgSend(NativePtr, MTLTensor_Selectors.bufferOffset);
    }

    public MTLTensorDataType DataType
    {
        get => (MTLTensorDataType)(ObjectiveCRuntime.uint_objc_msgSend(NativePtr, MTLTensor_Selectors.dataType));
    }

    public MTLTensorExtents Dimensions
    {
        get => new MTLTensorExtents(ObjectiveCRuntime.intptr_objc_msgSend(NativePtr, MTLTensor_Selectors.dimensions));
    }

    public ulong GpuResourceID
    {
        get => ObjectiveCRuntime.ulong_objc_msgSend(NativePtr, MTLTensor_Selectors.gpuResourceID);
    }

    public MTLTensorExtents Strides
    {
        get => new MTLTensorExtents(ObjectiveCRuntime.intptr_objc_msgSend(NativePtr, MTLTensor_Selectors.strides));
    }

    public MTLTensorUsage Usage
    {
        get => (MTLTensorUsage)(ObjectiveCRuntime.uint_objc_msgSend(NativePtr, MTLTensor_Selectors.usage));
    }

    public void GetBytes(nint bytes, MTLTensorExtents strides, MTLTensorExtents sliceOrigin, MTLTensorExtents sliceDimensions)
    {
        ObjectiveCRuntime.objc_msgSend(NativePtr, MTLTensor_Selectors.getBytes, bytes, strides.NativePtr, sliceOrigin.NativePtr, sliceDimensions.NativePtr);
    }

    public void ReplaceSliceOrigin(MTLTensorExtents sliceOrigin, MTLTensorExtents sliceDimensions, nint bytes, MTLTensorExtents strides)
    {
        ObjectiveCRuntime.objc_msgSend(NativePtr, MTLTensor_Selectors.replaceSliceOrigin, sliceOrigin.NativePtr, sliceDimensions.NativePtr, bytes, strides.NativePtr);
    }

    public void Retain() => ObjectiveCRuntime.Retain(NativePtr);
    public void Release() => ObjectiveCRuntime.Release(NativePtr);
}
