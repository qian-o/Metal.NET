// <auto-generated />
using System;
using System.Runtime.InteropServices;

namespace Metal.NET;

internal static class MTLIndirectComputeCommand_Selectors
{
    internal static readonly Selector computePipelineState = Selector.Register("computePipelineState");
    internal static readonly Selector setComputePipelineState_ = Selector.Register("setComputePipelineState:");
    internal static readonly Selector stageInRegion = Selector.Register("stageInRegion");
    internal static readonly Selector setStageInRegion_ = Selector.Register("setStageInRegion:");
    internal static readonly Selector clearBarrier = Selector.Register("clearBarrier");
    internal static readonly Selector reset = Selector.Register("reset");
    internal static readonly Selector setBarrier = Selector.Register("setBarrier");
    internal static readonly Selector setImageblockWidth = Selector.Register("setImageblockWidth");
    internal static readonly Selector setKernelBuffer = Selector.Register("setKernelBuffer");
    internal static readonly Selector setThreadgroupMemoryLength = Selector.Register("setThreadgroupMemoryLength");
}

[StructLayout(LayoutKind.Sequential)]
public readonly struct MTLIndirectComputeCommand
{
    public readonly nint NativePtr;

    public MTLIndirectComputeCommand(nint ptr) => NativePtr = ptr;

    public bool IsNull => NativePtr == 0;

    public static implicit operator nint(MTLIndirectComputeCommand o) => o.NativePtr;
    public static implicit operator MTLIndirectComputeCommand(nint ptr) => new MTLIndirectComputeCommand(ptr);

    public MTLComputePipelineState ComputePipelineState
    {
        get => new MTLComputePipelineState(ObjectiveCRuntime.intptr_objc_msgSend(NativePtr, MTLIndirectComputeCommand_Selectors.computePipelineState));
        set => ObjectiveCRuntime.objc_msgSend(NativePtr, MTLIndirectComputeCommand_Selectors.setComputePipelineState_, value.NativePtr);
    }

    // TODO: StageInRegion (value-struct return type MTLRegion requires objc_msgSend_stret)

    public void ClearBarrier()
    {
        ObjectiveCRuntime.objc_msgSend(NativePtr, MTLIndirectComputeCommand_Selectors.clearBarrier);
    }

    public void Reset()
    {
        ObjectiveCRuntime.objc_msgSend(NativePtr, MTLIndirectComputeCommand_Selectors.reset);
    }

    public void SetBarrier()
    {
        ObjectiveCRuntime.objc_msgSend(NativePtr, MTLIndirectComputeCommand_Selectors.setBarrier);
    }

    public void SetImageblockWidth(nuint width, nuint height)
    {
        ObjectiveCRuntime.objc_msgSend(NativePtr, MTLIndirectComputeCommand_Selectors.setImageblockWidth, (nint)width, (nint)height);
    }

    public void SetKernelBuffer(MTLBuffer buffer, nuint offset, nuint index)
    {
        ObjectiveCRuntime.objc_msgSend(NativePtr, MTLIndirectComputeCommand_Selectors.setKernelBuffer, buffer.NativePtr, (nint)offset, (nint)index);
    }

    public void SetKernelBuffer(MTLBuffer buffer, nuint offset, nuint stride, nuint index)
    {
        ObjectiveCRuntime.objc_msgSend(NativePtr, MTLIndirectComputeCommand_Selectors.setKernelBuffer, buffer.NativePtr, (nint)offset, (nint)stride, (nint)index);
    }

    public void SetThreadgroupMemoryLength(nuint length, nuint index)
    {
        ObjectiveCRuntime.objc_msgSend(NativePtr, MTLIndirectComputeCommand_Selectors.setThreadgroupMemoryLength, (nint)length, (nint)index);
    }

    public void Retain() => ObjectiveCRuntime.Retain(NativePtr);
    public void Release() => ObjectiveCRuntime.Release(NativePtr);
}
